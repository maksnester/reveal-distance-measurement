(this["webpackJsonpcra-ts"]=this["webpackJsonpcra-ts"]||[]).push([[0],{100:function(e,t,n){e.exports=n(140)},140:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n.n(a),i=n(98),o=n.n(i),l=n(57),d=n.n(l),c=n(56),s=n(99),u=n(36),m=n(83),p=n(14),f=n(78),v=n(84),w=n(37);function h(e){var t=87,n=65,a=83,r=68,i=37,o=38,l=39,d=40,c=new w.a(t,100),s=new w.a(n,100),u=new w.a(a,100),m=new w.a(r,100);s.addEventListener("holding",(function(t){e.truck(-.05*t.deltaTime,0,!0)})),m.addEventListener("holding",(function(t){e.truck(.05*t.deltaTime,0,!0)})),c.addEventListener("holding",(function(t){e.forward(.05*t.deltaTime,!0)})),u.addEventListener("holding",(function(t){e.forward(-.05*t.deltaTime,!0)}));var f=new w.a(i,100),v=new w.a(l,100),h=new w.a(o,100),E=new w.a(d,100);f.addEventListener("holding",(function(t){e.rotate(-.1*p.MathUtils.DEG2RAD*t.deltaTime,0,!0)})),v.addEventListener("holding",(function(t){e.rotate(.1*p.MathUtils.DEG2RAD*t.deltaTime,0,!0)})),h.addEventListener("holding",(function(t){e.rotate(0,-.05*p.MathUtils.DEG2RAD*t.deltaTime,!0)})),E.addEventListener("holding",(function(t){e.rotate(0,.05*p.MathUtils.DEG2RAD*t.deltaTime,!0)}))}function E(e,t){var n=t.getBoundingClientRect();return{x:(e.clientX-n.left)/t.clientWidth*2-1,y:(e.clientY-n.top)/t.clientHeight*-2+1}}function g(e,t){var n=new p.Mesh(new p.SphereGeometry(.1),new p.MeshPhongMaterial({color:t}));return n.position.copy(e),n}function b(e,t){var n=(t.x+e.x)/2,a=(t.y+e.y)/2,r=(t.z+e.z)/2;return new p.Vector3(n,a,r)}v.a.install({THREE:p});var y=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(),i=Object(u.a)(n,2),o=i[0],l=i[1];return Object(a.useEffect)((function(){return Object(s.a)(d.a.mark((function n(){var a,r,i,o,s,u,w,y,x,L,M,k,O,T,R,C,D,j,A,G,H;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.current&&t.current){n.next=2;break}return n.abrupt("return");case 2:return(a=new m.CogniteClient({appId:"reveal.example.measurement"})).loginWithOAuth({project:"publicdata"}),r=new p.Scene,i=!0,o=new f.RevealManager(a,(function(){i=!0})),n.next=9,o.addModelFromUrl("".concat(window.location.origin).concat("/reveal-distance-measurement","/primitives"));case 9:s=n.sent,r.add(s),u=new p.AmbientLight(16777215),r.add(u),w=new p.WebGLRenderer({canvas:e.current}),y=Math.ceil(.75*window.innerWidth),x=Math.ceil(.75*window.innerHeight),w.setClearColor("#444"),w.setSize(y,x),L=s.suggestCameraConfig(),M=L.position,k=L.target,O=L.near,T=L.far,R=new p.PerspectiveCamera(75,y/x,O,T),(C=new v.a(R,w.domElement)).setLookAt(M.x,M.y,M.z,k.x,k.y,k.z),h(C),D=new f.utilities.HtmlOverlayHelper,j=new p.Clock,A=function e(){var t=j.getDelta();C.update(t)&&(i=!0,o.update(R)),i&&(w.render(r,R),D.updatePositions(w,R),i=!1),requestAnimationFrame(e)},o.update(R),A(),G=[],H=null,w.domElement.addEventListener("mousedown",(function(e){if(e.altKey){var n=E(e,w.domElement),a=Object(f.intersectCadNodes)([s],{renderer:w,camera:R,coords:n})[0];if(a){var o=g(a.point,"#f5f500");if(r.add(o),s.requestNodeUpdate([a.treeIndex]),i=!0,H&&(r.remove.apply(r,Object(c.a)(G)),r.remove(H),H=null,G=[],l(0),D.removeOverlayElement(t.current)),G.push(o),2===G.length){var d=new p.LineBasicMaterial({color:16776960}),u=(new p.BufferGeometry).setFromPoints(G.map((function(e){return e.position})));H=new p.Line(u,d),r.add(H),D.addOverlayElement(t.current,b(G[0].position,G[1].position)),l(G[0].position.distanceTo(G[1].position).toFixed(4)),i=!0}}}}));case 31:case"end":return n.stop()}}),n)})))(),function(){}}),[]),r.a.createElement("div",null,r.a.createElement("h1",null,"Distance measurement"),r.a.createElement("h4",null,'Hold "ALT" and click to add point'),r.a.createElement("div",null,r.a.createElement("div",{style:{maxHeight:"90vh",maxWidth:"fit-content",position:"relative",overflow:"hidden"}},r.a.createElement("canvas",{ref:e,style:{display:"block"}}),r.a.createElement("div",{ref:t,style:{marginTop:"-25px",padding:"3px",position:"absolute",pointerEvents:"none",top:"298px",left:"395px",color:"rgb(255, 255, 255)",background:"rgba(35, 35, 35, 0.855)",borderRadius:"15%",display:o?"block":"none"}},o))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))}},[[100,1,2]]]);
//# sourceMappingURL=main.d1b74660.chunk.js.map