(this["webpackJsonpcra-ts"]=this["webpackJsonpcra-ts"]||[]).push([[0],{100:function(e,t,n){e.exports=n(140)},140:function(e,t,n){"use strict";n.r(t);var a=n(15),i=n.n(a),r=n(98),o=n.n(r),l=n(57),d=n.n(l),c=n(56),s=n(99),u=n(36),m=n(83),p=n(13),f=n(78),v=n(84),w=n(37);function h(e){var t=87,n=65,a=83,i=68,r=37,o=38,l=39,d=40,c=new w.a(t,100),s=new w.a(n,100),u=new w.a(a,100),m=new w.a(i,100);s.addEventListener("holding",(function(t){e.truck(-.05*t.deltaTime,0,!0)})),m.addEventListener("holding",(function(t){e.truck(.05*t.deltaTime,0,!0)})),c.addEventListener("holding",(function(t){e.forward(.05*t.deltaTime,!0)})),u.addEventListener("holding",(function(t){e.forward(-.05*t.deltaTime,!0)}));var f=new w.a(r,100),v=new w.a(l,100),h=new w.a(o,100),E=new w.a(d,100);f.addEventListener("holding",(function(t){e.rotate(-.1*p.MathUtils.DEG2RAD*t.deltaTime,0,!0)})),v.addEventListener("holding",(function(t){e.rotate(.1*p.MathUtils.DEG2RAD*t.deltaTime,0,!0)})),h.addEventListener("holding",(function(t){e.rotate(0,-.05*p.MathUtils.DEG2RAD*t.deltaTime,!0)})),E.addEventListener("holding",(function(t){e.rotate(0,.05*p.MathUtils.DEG2RAD*t.deltaTime,!0)}))}function E(e,t){var n="clientX"in e?e:e.touches[0],a=t.getBoundingClientRect();return{x:(n.clientX-a.left)/t.clientWidth*2-1,y:(n.clientY-a.top)/t.clientHeight*-2+1}}function g(e,t){var n=new p.Mesh(new p.SphereGeometry(.1),new p.MeshPhongMaterial({color:t}));return n.position.copy(e),n}function b(e,t){var n=(t.x+e.x)/2,a=(t.y+e.y)/2,i=(t.z+e.z)/2;return new p.Vector3(n,a,i)}v.a.install({THREE:p});var y=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(),r=Object(u.a)(n,2),o=r[0],l=r[1];return Object(a.useEffect)((function(){return Object(s.a)(d.a.mark((function n(){var a,i,r,o,s,u,w,y,L,x,M,O,R,k,T,C,D,j,A,G,U,H;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.current&&t.current){n.next=2;break}return n.abrupt("return");case 2:return(a=new m.CogniteClient({appId:"reveal.example.measurement"})).loginWithOAuth({project:"publicdata"}),i=new p.Scene,r=!0,o=new f.RevealManager(a,(function(){r=!0})),n.next=9,o.addModelFromUrl("".concat(window.location.origin).concat("/reveal-distance-measurement","/primitives"));case 9:s=n.sent,i.add(s),u=new p.AmbientLight(16777215),i.add(u),w=new p.WebGLRenderer({canvas:e.current}),y=Math.ceil(.75*window.innerWidth),L=Math.ceil(.75*window.innerHeight),w.setPixelRatio(window.devicePixelRatio),w.setClearColor("#444"),w.setSize(y,L),x=s.suggestCameraConfig(),M=x.position,O=x.target,R=x.near,k=x.far,T=new p.PerspectiveCamera(75,y/L,R,k),(C=new v.a(T,w.domElement)).setLookAt(M.x,M.y,M.z,O.x,O.y,O.z),h(C),D=new f.utilities.HtmlOverlayHelper,j=new p.Clock,A=function e(){var t=j.getDelta();C.update(t)&&(r=!0,o.update(T)),r&&(w.render(i,T),D.updatePositions(w,T),r=!1),requestAnimationFrame(e)},o.update(T),A(),G=[],U=null,H=function(e){if(!("button"in e)||e.button===p.MOUSE.LEFT){var n=E(e,w.domElement),a=Object(f.intersectCadNodes)([s],{renderer:w,camera:T,coords:n})[0];if(a){var o=g(a.point,"#f5f500");if(i.add(o),s.requestNodeUpdate([a.treeIndex]),r=!0,U&&(i.remove.apply(i,Object(c.a)(G)),i.remove(U),U=null,G=[],l(0),D.removeOverlayElement(t.current)),G.push(o),2===G.length){var d=new p.LineBasicMaterial({color:16776960}),u=(new p.BufferGeometry).setFromPoints(G.map((function(e){return e.position})));U=new p.Line(u,d),i.add(U),D.addOverlayElement(t.current,b(G[0].position,G[1].position)),l(G[0].position.distanceTo(G[1].position).toFixed(4)),r=!0}}}},w.domElement.addEventListener("mousedown",H),w.domElement.addEventListener("touchstart",H);case 34:case"end":return n.stop()}}),n)})))(),function(){}}),[]),i.a.createElement("div",null,i.a.createElement("h1",null,"Distance measurement"),i.a.createElement("h4",null,'Hold "ALT" and click to add point.'),i.a.createElement("div",null,i.a.createElement("div",{style:{maxWidth:"fit-content",position:"relative",overflow:"hidden"}},i.a.createElement("canvas",{ref:e,style:{display:"block"}}),i.a.createElement("div",{ref:t,style:{padding:"3px",position:"absolute",pointerEvents:"none",color:"rgb(255, 255, 255)",background:"rgba(35, 35, 35, 0.855)",borderRadius:"15%",display:o?"block":"none"}},o))))};o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(y,null)),document.getElementById("root"))}},[[100,1,2]]]);
//# sourceMappingURL=main.7c31ab3e.chunk.js.map